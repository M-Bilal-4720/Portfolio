trigger:
  - main  # Trigger on push to main branch

pool:
  name: Default  # Make sure this matches your self-hosted agent pool name

variables:
  DEPLOY_PATH: "/var/www/your_domain/Portfolio"  # Absolute path to your local deployment directory

steps:
  - checkout: none  # Prevent Azure Pipelines from doing its own checkout (since you're doing manual git pull)

  - script: |
      echo "🚀 Starting Deployment"

      cd $DEPLOY_PATH || { echo "❌ Directory not found: $DEPLOY_PATH"; exit 1; }

      echo "🔄 Resetting local changes"
      git reset --hard

      echo "⬇️ Pulling latest code"
      git pull origin main

      echo "✅ Code pulled successfully"
    displayName: "📥 Pull Latest Code"
